{% extends 'base.html' %}
{% block extra_head %}
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
{% endblock %}

{% block title %}12 шагов - {{ step.get_program_display }}{% endblock %}

{% block nav %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/steps/{{ step.program }}">{{ step.get_program_display }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ step.title }}</li>
        </ol>
    </nav>
{% endblock %}
{% block content %}
<div>
    {{ step.text|safe }}
</div>
{% regroup object_list by section as sections %}
    <div id="accordion">
{% for section in sections %}

    {% if section.grouper.show_header and not forloop.first %}
        </div></div></div>
    {% endif %}
    {% if section.grouper.show_header %}
    <div class="card">
    <div class="card-header" id="heading{{ section.grouper.pk }}">
      <h5 class="mb-0">
        <button class="btn btn-link" data-toggle="collapse" data-target="#collapse{{ section.grouper.pk }}" aria-expanded="true" aria-controls="collapse{{ section.grouper.pk }}">
            {{ section.grouper.number }}. {{ section.grouper.title }}</button></h5></div>
        <div id="collapse{{ section.grouper.pk }}" class="collapse show" aria-labelledby="heading{{ section.grouper.pk }}" data-parent="#accordion">
      <div class="card-body">
    {% endif %}
    <p>{{ section.grouper.text|safe }}</p>
<ol>
{% for question in section.list %}
    <li>
    <a href="/question/{{ question.pk }}/">{{ question.text|safe }}</a>
    {% if question.answer_count %}
        <span style="background-color: {% if question.status == 'COMPLETED' %}lightgreen{% endif %}{% if question.status == 'WORK' %}yellow{% endif %}">
            Примеров: {{ question.answer_count }}
        </span>
    {% endif %}
    </li>
{% endfor %}
</ol>
    {% if forloop.last %}
        </div></div></div>
    {% endif %}
{% endfor %}
        </div>
{% endblock %}